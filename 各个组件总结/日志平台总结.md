











业务支撑：

多轮推动阿里云SLS日志下云，从19X万/月下降到2x万/月。日志平台接入2xxx+应用，日志Kafka23年双十一1xxxW，2024年周末1xxxW，日志数据存储共计1xx2PB，日志平台整体成本10X万/月。



产品演进：

从0到1构建日志平台，日志平台架构升级。采集日志到Kafka，Flink消费后写入ClickHouse，支持热温冷三级存储迁移策略，ClickHouse压缩使用ZSTD压缩。整体Clickhouse根据按照业务拆分为6个集群。

日志采集方面，基于Filebeat二开自研日志采集器，支持ECS和容器采集，容器采集支持Deamonset、SideCar两种部署方式，采集除了文本文件外还支持二进制用于宿主机安全审计，支持采集按时间回溯，才起配置的动态下发，将kafka库更换为confluent以及参数调优，Kafka集群CPU使用下降50%（1000C->500C），磁盘使用率从下降50%（60%->30%）。

查询响应方面，前后端websocket连接，服务端两小时分批响应推送，CK连接复用，5小时查询平均耗时500ms，1天查询平均耗时2秒内。

日志扩展功能，应用通过工单系统自动接入日志系统，ECS扩缩容自动采集，日志图标大盘绘制，基于日志指标告警。

Flink任务方面，基于公司Flink任务平台API，搭建日志平台批量任务管理，jar包批量上传、参数批量修改，大促任务批量扩缩容。



稳定性提升：

除CK、Kafka、日志关联基本服务监控外，日志延迟大盘建设T+1&T+7环比，采集器心跳监控与告警，无日志丢失故障。





























